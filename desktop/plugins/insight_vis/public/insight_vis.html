<div ng-controller="insightVisController" class="insight-vis-wrapper">

  <div ng-if="data.length === 0 || validateData(data)" class="no-data-container-wrapper">
    <div class="insight-vis-no-data-container">
      <no-data-message
        enable-custom-error-message="vis.params.enableCustomErrorMessage"
        error-message="vis.params.customErrorMessage"
        enable-custom-error-tooltip="vis.params.enableCustomErrorTooltip"
        custom-error-tooltip="vis.params.customErrorTooltip"
      ></no-data-message>
    </div>
  </div>
  <loader-animation ng-if="loadingInsights && !data.length"></loader-animation>
  <div ng-if="data.length" class="insights-container">
    <div ng-repeat="insight in data">
      <div  ng-if="showInsight(insight)" class ="insight">
        <div class="insight-image">
          <img ng-src="{{insight.image}}" />
        </div>
        <div ng-switch="insight.insightType" class="insight-content">
          <div ng-switch-when="html" ng-bind-html="render(insight.html, insight.data)"
            ng-click="viewDashboardForThisMetric(insight.link)"
            ng-class="!hasLink(insight.link) ? 'cur-initial': ''">
          </div>
          <div ng-switch-when="md" ng-bind-html="renderMd(insight.md, insight.data)"
            ng-click="viewDashboardForThisMetric(insight.link)"
            ng-class="!hasLink(insight.link) ? 'cur-initial': ''"></div>
          <div class="text-container" ng-switch-default>
            <div class="insight-value"
              ng-click="viewDashboardForThisMetric(insight.link)"
              ng-class="!hasLink(insight.link) ? 'cur-initial': ''">
              {{insight.metadata.value[0]}}</div>
              <div class="insight-title">{{insight.name}}</div>
              <div class="insight-data">{{insight.data.text}}</div>
          </div>
          
        </div>
      </div>
    </div>
  </div>
</div>