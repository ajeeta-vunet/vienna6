<div class="status-indicator-and-kpi-vis-container-wrapper"
  ng-controller="statusIndicatorAndKpiVisController"
  ng-style="responseData && {'overflow':'hidden'}">
  <div class="status-and-kpi-outer-container">
    <!-- Status Indicator template -->
    <div
      class=status-and-kpi-container 
      ng-if="vis.params.request_type == 'Status Indicator'"
      ng-repeat="metric in statusData"
      ng-style="responseData && {'margin-bottom':'0px'}">
      <div 
        class="row status-content-container"
        ng-class="metric.background">
        <div class="col-sm-3 status-indicator-icon">
          <img src="{{metric.image}}">
        </div>
        <div class="col-sm-9 status-icon-and-label-container-wrapper">
          <div class="status-icon-and-label-container">
            <span class="status-indicator-label">
              {{metric.label}}
            </span>
          </div>
          <div class="status-indicator-description">
            {{metric.description}}
          </div>
        </div>
      </div>
    </div>
    

    <!-- KPI Template -->

    <div
      ng-class="{'kpi-container-vertical' : vis.params.kpiTemplate === 'Vertical Alignment',
                 'kpi-container-horizontal' : vis.params.kpiTemplate === 'Horizontal Alignment'}" 
      ng-repeat="(bmvName, metrices) in responseData track by $index"
      ng-if="vis.params.request_type == 'KPI'"
      ng-style="responseData && {'margin-bottom':'0px'}">

      <!-- Vertical Aligned template for KPI -->
      <div 
        class="kpi-vertical-container"
        ng-repeat="(metricName, metric) in metrices.metrics track by $index" 
        ng-if="vis.params.kpiTemplate === 'Vertical Alignment'">
        <div class="kpi-icon">
          <img src="{{metricImageDict[metric.metricIcon]}}">
        </div>
        <div class="kpi-value"
          ng-style="{color:metric.color}"
          ng-if="!metric.view_more || !metric.view_more.enabled">
          {{metric.formattedValue}}
        </div>
        <div class="kpi-value"
          ng-style="{color:metric.color}"
          ng-if="metric.view_more && metric.view_more.enabled"
          ng-click="viewDashboardForThisMetric(metric)">
          {{metric.formattedValue}}
        </div>
        <div class="kpi-label">
          {{metric.label}}
        </div>
        <div class="kpi-description">
          {{metric.description}}
        </div>
      </div>
  
     <!-- Horizontal Aligned template for KPI -->
     <div 
      class="kpi-horizontal-container"
      ng-repeat="(metricName, metric) in metrices.metrics track by $index" 
      ng-if="vis.params.kpiTemplate === 'Horizontal Alignment'">
       <div class="row">
         <div class="col-sm-4 kpi-icon">
            <img src="{{metricImageDict[metric.metricIcon]}}">
         </div>
         <div 
            class="col-sm-8 kpi-horizontal-details-container"
            ng-class="{'center-align-if-no-desc' : !metric.description}">
            <div class="kpi-value"
              ng-style="{color:metric.color}"
              ng-if="!metric.view_more || !metric.view_more.enabled">
              {{metric.formattedValue}}
            </div>
            <div class="kpi-value"
              ng-style="{color:metric.color}"
              ng-if="metric.view_more && metric.view_more.enabled"
              ng-click="viewDashboardForThisMetric(metric)">
              {{metric.formattedValue}}
            </div>
            <div class="kpi-label">
              {{metric.label}}
            </div>
            <div 
              class="kpi-description"
              ng-if="metric.description">
              {{metric.description}}
            </div>
         </div>
       </div>
     </div>
    </div>

  </div>
  <div ng-if="!responseData" class="no-data-container-wrapper">
    <div class="kpi-vis-no-data-container">
      <h2 aria-hidden="true">
        <i aria-hidden="true" class="fa fa-exclamation-triangle">
        </i>
      </h2>
      <h4>No Results Found</h4>
    </div>
  </div>
</div>
