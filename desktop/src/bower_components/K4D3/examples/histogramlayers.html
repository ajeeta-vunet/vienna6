<!DOCTYPE html>
<html>
    <head>
        <title>Histogram layers</title>
        <style>
            body {
                font: 10px sans-serif;
                fill: #444;
                background: #f4f4f4;
            }
            .form {
                width: 960px;
                height: 20px;
                margin: 30px auto 0 auto;
                display: block;
            }
            .inputs {
                float: right;
                margin: 0 5px 0 0;
            }
            .test {
                width: 960px;
                margin: 0 auto;
                display: block;
            }
            .bkgd {
                fill: #fff;
            }
            text {
                font: 10px sans-serif;
            }
            .axis path,
            .axis line {
                fill: none;
                stroke: #000;
                shape-rendering: crispEdges;
            }
            label{
                margin: 6px;
            }
            .k4-tip {
                line-height: 1;
                font-weight: bold;
                padding: 12px;
                background: #f4f4f4;
                -webkit-border-radius: 10px;
                -mox-border-radius: 10px;
                border-radius: 10px;
                -webkit-box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
                -moz-box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
                box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
                color: black;
                border-radius: 2px;
            }

            /* Creates a small triangle extender for the tooltip */
            .k4-tip:after {
                box-sizing: border-box;
                display: inline;
                font-size: 10px;
                width: 100%;
                line-height: 1;
                color: #f4f4f4;
                content: "\25BC";
                position: absolute;
                text-align: center;
            }

            /* Style northward tooltips differently */
            .k4-tip.n:after {
                margin: -1px 0 0 0;
                top: 100%;
                left: 0;
            }

            .legend rect {
                fill: white;
                stroke: none;
                opacity: 0.8;
            }

            .legend-items text {
                font-size: 14px;
            }
        </style>
    </head>
    <body>
        <div class='form'>
            <div class='inputs'>
                <label><input type='radio' name='mode' value='grouped' checked> Grouped</label>
                <label><input type='radio' name='mode' value='stacked'> Stacked</label>
                <label><input type='radio' name='mode' value='normalized'> Normalized</label>
            </div>
        </div>
        <div id='test1' class='test'></div>
        <div id='test2' class='test'></div>

        <script src='../lib/d3/d3.min.js'></script>
        <script src='../k4.d3.js'></script>

        <script>
        
            var data2 = [
                [
                    { "x": 0, "y": 0.8844082 },
                    { "x": 1, "y": 1.481108 },
                    { "x": 2, "y": 1.0280456 },
                    { "x": 3, "y": 1.2027342 },
                    { "x": 4, "y": 0.8288619 },
                    { "x": 5, "y": 1.1551247 },
                    { "x": 6, "y": 1.4108497 },
                    { "x": 7, "y": 1.573156 },
                    { "x": 8, "y": 1.7861147 },
                    { "x": 9, "y": 3.038947 },
                    { "x": 10, "y": 2.392341 },
                    { "x": 11, "y": 1.6871792 },
                    { "x": 12, "y": 1.5468425 },
                    { "x": 13, "y": 1.0206737 },
                    { "x": 14, "y": 1.1753416 },
                    { "x": 15, "y": 1.522858 },
                    { "x": 16, "y": 2.983441 },
                    { "x": 17, "y": 5.133735 },
                    { "x": 18, "y": 7.224354 },
                    { "x": 19, "y": 7.431775 },
                    { "x": 20, "y": 6.399373 },
                    { "x": 21, "y": 3.69291 },
                    { "x": 22, "y": 2.254959 },
                    { "x": 23, "y": 2.325067 },
                    { "x": 24, "y": 3.4062604 },
                    { "x": 25, "y": 4.831221 },
                    { "x": 26, "y": 4.509324 },
                    { "x": 27, "y": 3.859732 },
                    { "x": 28, "y": 3.4288675 },
                    { "x": 29, "y": 2.763701 }
                ],
                [
                    { "x": 0, "y": 3.277066 },
                    { "x": 1, "y": 4.28015 },
                    { "x": 2, "y": 2.314823 },
                    { "x": 3, "y": 1.977416 },
                    { "x": 4, "y": 2.54941 },
                    { "x": 5, "y": 2.170335 },
                    { "x": 6, "y": 1.55193 },
                    { "x": 7, "y": 1.828068 },
                    { "x": 8, "y": 1.552802 },
                    { "x": 9, "y": 1.290394 },
                    { "x": 10, "y": 1.24277 },
                    { "x": 11, "y": 1.268239 },
                    { "x": 12, "y": 1.49669 },
                    { "x": 13, "y": 1.57461 },
                    { "x": 14, "y": 1.36925 },
                    { "x": 15, "y": 1.54476 },
                    { "x": 16, "y": 1.255244 },
                    { "x": 17, "y": 1.09638 },
                    { "x": 18, "y": 1.286965 },
                    { "x": 19, "y": 1.141393 },
                    { "x": 20, "y": 1.40536 },
                    { "x": 21, "y": 1.494249 },
                    { "x": 22, "y": 1.015363 },
                    { "x": 23, "y": 0.886962 },
                    { "x": 24, "y": 1.034566 },
                    { "x": 25, "y": 1.589218 },
                    { "x": 26, "y": 0.963824 },
                    { "x": 27, "y": 1.191486 },
                    { "x": 28, "y": 2.481383 },
                    { "x": 29, "y": 2.2742 }
                ],
                [
                    { "x": 0, "y": 1.0876985 },
                    { "x": 1, "y": 1.0122077 },
                    { "x": 2, "y": 0.9393067 },
                    { "x": 3, "y": 1.3863626 },
                    { "x": 4, "y": 0.8587753 },
                    { "x": 5, "y": 1.3929757 },
                    { "x": 6, "y": 0.9343624 },
                    { "x": 7, "y": 1.5536027 },
                    { "x": 8, "y": 1.566821 },
                    { "x": 9, "y": 1.1355328 },
                    { "x": 10, "y": 0.815765 },
                    { "x": 11, "y": 1.2168527 },
                    { "x": 12, "y": 0.996575 },
                    { "x": 13, "y": 2.0402585 },
                    { "x": 14, "y": 2.8914773 },
                    { "x": 15, "y": 1.4401553 },
                    { "x": 16, "y": 1.1379643 },
                    { "x": 17, "y": 0.8705049 },
                    { "x": 18, "y": 1.0352086 },
                    { "x": 19, "y": 0.8603228 },
                    { "x": 20, "y": 1.0466003 },
                    { "x": 21, "y": 1.325505 },
                    { "x": 22, "y": 1.4775715 },
                    { "x": 23, "y": 0.8189888 },
                    { "x": 24, "y": 1.0781158 },
                    { "x": 25, "y": 1.4542994 },
                    { "x": 26, "y": 2.605967 },
                    { "x": 27, "y": 4.024406 },
                    { "x": 28, "y": 4.450423 },
                    { "x": 29, "y": 3.3943867
                    }
                ],
                [
                    { "x": 0, "y": 5.902411 },
                    { "x": 1, "y": 4.894352 },
                    { "x": 2, "y": 3.0685465 },
                    { "x": 3, "y": 1.9666992 },
                    { "x": 4, "y": 1.4785942 },
                    { "x": 5, "y": 1.091198 },
                    { "x": 6, "y": 1.4308047 },
                    { "x": 7, "y": 0.9187601 },
                    { "x": 8, "y": 1.04027 },
                    { "x": 9, "y": 0.9435814 },
                    { "x": 10, "y": 1.1221278 },
                    { "x": 11, "y": 1.7441262 },
                    { "x": 12, "y": 2.513928 },
                    { "x": 13, "y": 1.4015922 },
                    { "x": 14, "y": 1.2609381 },
                    { "x": 15, "y": 1.548244 },
                    { "x": 16, "y": 1.0725328 },
                    { "x": 17, "y": 1.5648195 },
                    { "x": 18, "y": 0.9905595 },
                    { "x": 19, "y": 1.2427888 },
                    { "x": 20, "y": 1.1749918 },
                    { "x": 21, "y": 1.5988346 },
                    { "x": 22, "y": 0.9067769 },
                    { "x": 23, "y": 1.3369145 },
                    { "x": 24, "y": 0.8532394 },
                    { "x": 25, "y": 1.1332053 },
                    { "x": 26, "y": 0.8204884 },
                    { "x": 27, "y": 1.1091128 },
                    { "x": 28, "y": 1.471285 },
                    { "x": 29, "y": 1.2530068 }
                ],
                [
                    { "x": 0, "y": 1.075954 },
                    { "x": 1, "y": 1.585442 },
                    { "x": 2, "y": 1.1674 },
                    { "x": 3, "y": 1.14369 },
                    { "x": 4, "y": 1.34921 },
                    { "x": 5, "y": 1.243447 },
                    { "x": 6, "y": 1.750262 },
                    { "x": 7, "y": 2.475354 },
                    { "x": 8, "y": 1.875433 },
                    { "x": 9, "y": 1.398197 },
                    { "x": 10, "y": 1.51274 },
                    { "x": 11, "y": 2.751618 },
                    { "x": 12, "y": 3.86732 },
                    { "x": 13, "y": 5.12918 },
                    { "x": 14, "y": 5.98922 },
                    { "x": 15, "y": 4.64792 },
                    { "x": 16, "y": 3.483686 },
                    { "x": 17, "y": 2.318907 },
                    { "x": 18, "y": 1.37544 },
                    { "x": 19, "y": 1.519539 },
                    { "x": 20, "y": 1.500183 },
                    { "x": 21, "y": 0.806488 },
                    { "x": 22, "y": 1.184477 },
                    { "x": 23, "y": 1.092799 },
                    { "x": 24, "y": 1.079844 },
                    { "x": 25, "y": 1.573577 },
                    { "x": 26, "y": 1.208479 },
                    { "x": 27, "y": 0.980507 },
                    { "x": 28, "y": 1.399507 },
                    { "x": 29, "y": 1.200258 }
                ]
            ];

            // define chart
            var viz1 = k4.histogramlayers();

            // draw chart
            d3.select('#test1').datum(data2).call(viz1);

            // input buttons
            d3.selectAll('input').on('change', change);

            function change() {
                console.log(this.value);
                if (this.value === 'grouped') {
                    viz1 = k4.histogramlayers()
                        .displaySeries('grouped');
                }
                if (this.value === 'stacked') {
                    viz1 = k4.histogramlayers()
                        .displaySeries('stacked');
                }
                if (this.value === 'normalized') {
                    viz1 = k4.histogramlayers()
                        .displaySeries('normalized');
                }

                d3.select('#test1').datum(data2).call(viz1);
            }

        </script>
    </body>
</html>
