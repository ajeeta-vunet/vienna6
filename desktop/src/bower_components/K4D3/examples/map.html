<!DOCTYPE html>
<html>
    <head>
        <title>Map</title>
        <style>
            body {
                font: 10px sans-serif;
                fill: #444;
                background: #f4f4f4;
                margin: 0;
                padding: 0;
            }
            .test {
                float: left;
            }
            water {
                fill: #ddd;
            }
            .graticule {
                fill: none;
                stroke: #444;
                stroke-width: 0.6;
                stroke-opacity: 0.4;
            }
            .edge {
                fill: none;
                stroke: #444;
                stroke-width: 0.8;
                stroke-opacity: 0.5;
            }
            .land {
                fill: #444;
                fill-opacity: 0.6;
                stroke: #444;  
                stroke-opacity: 0.7;
                stroke-width: 1.5;
            }
            .countries path {
                fill: #ddd;
                fill-opacity: 0.4;
                stroke: #444;  
                stroke-linejoin: round;
                stroke-width: 0.4;
                stroke-opacity: 0.2;
            }
            .countries path:hover {
                fill-opacity: 0.6;
                stroke-width: 1.1;
                stroke-opacity: 0.5;
                
            }
            .labels {
                font: 12px sans-serif;
                fill: #444;
            }
            .point{
                /*  fill: #700000;
                opacity: 0.8; */
                fill: #eee;
                stroke: #444;
                stroke-width: 1;
                stroke-opacity: 1;
            }
            .noclick {
                pointer-events:none;
            }
        </style>
    </head>
    <body>
        <div id="test1" class="test"></div>
        <div id="test2" class="test"></div>

        <script src="../lib/d3/d3.min.js"></script>
        <script src="../lib/topojson/topojson.js"></script>
        <script src="../lib/queue-async/queue.min.js"></script>
        <script src="../k4.d3.js"></script>
        <script>

        // #test 1
        var viz1 = k4.map()
        .watercolor("#fff");

        // #test2
        var viz2 = k4.map()
        .width(400)
        .height(400)
        .scale(150)
        .shading(true)
        .labels(false)
        .countrycolor("#d3b745")
        .pointcolor("#ad0000")
        .rotate([87, -20]);

        // load topojson data
        queue()
            .defer(d3.json, "json/world-110m.json")
            .defer(d3.json, "json/world-places.json")
            .await(ready);

        function ready(error, world, place) {
            //console.log(error, world, place);
            var land      = topojson.feature(world, world.objects.land);
            var countries = topojson.feature(world, world.objects.countries).features;
            var places    = place.features;
            //console.log(land, countries, places);

            d3.select('#test1')
                .datum([land, countries, places])
                .call(viz1);

            d3.select('#test2')
                .datum([land, countries, places])
                .call(viz2);
            
        }

        </script>

    </body>
</html>
