/*! K4D3 - v0.1.0 - 2014-02-26 */var k4=window.k4||{};k4.version="0.1.0",window.k4=k4,k4.namespace=function(a){"use strict";var b,c=a.split("."),d=k4;for("k4"===c[0]&&(c=c.slice(1)),b=0;b<c.length;b+=1)"undefined"==typeof d[c[b]]&&(d[c[b]]={}),d=d[c[b]];return d},k4.area=function(){"use strict";function a(a){a.each(function(a){var q=e-d.left-d.right,r=f-d.top-d.bottom;a=a.map(function(b,c){return[g.call(a,b,c),h.call(a,b,c)]}),j.domain(d3.extent(a,function(a){return a[0]})).nice().range([0,q]),k.domain([0,d3.max(a,function(a){return a[1]})]).nice().range([r,0]),n.interpolate(i),o.interpolate(i);var s=d3.select(this).selectAll("svg").data([a]),t=s.enter().append("svg").append("g");t.append("rect").attr("class","background"),t.append("path").attr("class","area"),t.append("path").attr("class","line"),t.append("g").attr("class","x axis"),t.append("g").attr("class","y axis"),t.append("g").attr("class","points"),s.attr("width",e).attr("height",f);var u=s.select("g").attr("transform","translate("+d.left+", "+d.top+")");u.select(".points").selectAll(".points").append("circle").data(a).enter().append("circle").attr("class","points").attr("cx",b).attr("cy",c).attr("r",4.5).style("fill","white").style("fill-opacity",function(){return 1}).style("stroke",function(){return"object"==typeof p?p:p([a])}).style("stroke-width",function(){return 1.5}),u.select(".background").attr("width",q).attr("height",r),u.select(".area").attr("d",n(a)).attr("d",n.y0(k.range()[0])).attr("fill",function(a){return"object"==typeof p?p:p(a)}).style("opacity",.5),u.select(".line").attr("d",o(a)).attr("fill","none").style("stroke",function(a){return"object"==typeof p?p:p(a)}).style("stroke-width",3.5),u.select("g.x.axis").attr("transform","translate(0,"+k.range()[0]+")").call(l.tickSize(-r)),u.select("g.y.axis").call(m.tickSize(-q))})}function b(a){return j(a[0])}function c(a){return k(a[1])}var d={top:20,right:50,bottom:50,left:50},e=960,f=500,g=function(a){return a[0]},h=function(a){return a[1]},i="cardinal",j=d3.time.scale(),k=d3.scale.linear(),l=d3.svg.axis().scale(j).ticks(10).tickPadding(6).orient("bottom"),m=d3.svg.axis().scale(k).ticks(10).tickPadding(6).orient("left"),n=d3.svg.area().x(b).y1(c),o=d3.svg.line().x(b).y(c),p=d3.scale.category10();return a.margin=function(b){return arguments.length?(d.top="undefined"!=typeof b.top?b.top:d.top,d.right="undefined"!=typeof b.right?b.right:d.right,d.bottom="undefined"!=typeof b.bottom?b.bottom:d.bottom,d.left="undefined"!=typeof b.left?b.left:d.left,a):d},a.width=function(b){return arguments.length?(e=b,a):e},a.height=function(b){return arguments.length?(f=b,a):f},a.x=function(b){return arguments.length?(g=b,a):g},a.y=function(b){return arguments.length?(h=b,a):h},a.interpolate=function(b){return arguments.length?(i=b,a):i},a.color=function(b){return arguments.length?(p=b,a):p},a},k4.dendrogram=function(){"use strict";function a(a){a.each(function(a){var g=e.nodes(a),h=e.links(g),i=d3.select(this).append("svg").attr("width",b).attr("height",c).append("g").attr("transform","translate(120,0)");i.selectAll(".link").data(h).enter().append("path").attr("class","link").attr("d",f);var j=i.selectAll(".node").data(g).enter().append("g").attr("class","node").attr("transform",function(a){return"translate("+a.y+","+a.x+")"});j.append("circle").attr("r",4.5).style("fill",function(a){return a.children?"#ffffff":d(a.name)}).style("stroke",function(a){return a.children?"#4682B4":d(a.name)}),j.append("text").attr("dx",function(a){return a.children?-8:8}).attr("dy",3).style("text-anchor",function(a){return a.children?"end":"start"}).text(function(a){return a.name})})}var b=600,c=2e3,d=d3.scale.category10(),e=d3.layout.cluster().size([c,b-200]),f=d3.svg.diagonal().projection(function(a){return[a.y,a.x]});return a.width=function(c){return arguments.length?(b=c,a):b},a.height=function(b){return arguments.length?(c=b,a):c},a.color=function(b){return arguments.length?(d=b,a):d},a.cluster=function(b){return arguments.length?(e=b,a):e},a.diagonal=function(b){return arguments.length?(f=b,a):f},a},k4.heatmap=function(){"use strict";function a(a){a.each(function(a){var t=c-b.left-b.right,u=d-b.top-b.bottom,v=a.map(function(a){return a.z}),w=t/(g-1),x=u/(f-1);s.domain(v).range(r),a=a.map(function(b,c){return[j.call(a,b,c),k.call(a,b,c),l.call(a,b,c)]}),m.domain([1,g]).range([1,t]),n.domain([1,f]).range([u,1]),o.domain([d3.min(a,function(a){return a[2]}),d3.max(a,function(a){return a[2]})]).range([2,10]);var y=d3.select(this).selectAll("svg").data([a]),z=y.enter().append("svg").append("g").attr("class","inner");z.append("g").attr("class","bkgd"),z.append("g").attr("class","x axis"),z.append("g").attr("class","y axis"),z.append("g").attr("class","points"),y.attr("width",c).attr("height",d),z.select("g.points").selectAll(".vertices").data(a).enter().append("rect").attr("x",function(a){return(a[0]-1)*w-.5*x}).attr("y",function(a){return(a[1]-1)*x-1*x}).attr("rx",e).attr("ry",e).attr("class","block").attr("width",w).attr("height",x).style("fill",function(a){return s(a[2])}).style("fill-opacity",function(){return.8}).style("stroke",function(){return h}).style("stroke-width",function(){return i});var A=y.select("g").attr("transform","translate("+b.left+", "+b.top+")");A.select("g.x.axis").attr("transform","translate(0,"+n.range()[0]+")").call(p.tickSize(-u)),A.select("g.y.axis").attr("transform","translate("+x/-2+","+x/-2+")").call(q.tickSize(-t))})}var b={top:20,right:20,bottom:20,left:50},c=500,d=500,e=0,f=10,g=20,h="#666",i=0,j=function(a){return a[0]},k=function(a){return a[1]},l=function(a){return a[2]},m=d3.scale.linear(),n=d3.scale.linear(),o=d3.scale.linear(),p=d3.svg.axis().scale(m).orient("bottom").tickPadding(6).ticks(10),q=d3.svg.axis().scale(n).orient("left").tickPadding(6).ticks(10),r=["#1d2b38","#1a415d","#005c75","#007784","#009286","#49ac7e","#89c272"],s=d3.scale.quantile();return a.margin=function(c){return arguments.length?(b.top="undefined"!=typeof c.top?c.top:b.top,b.right="undefined"!=typeof c.right?c.right:b.right,b.bottom="undefined"!=typeof c.bottom?c.bottom:b.bottom,b.left="undefined"!=typeof c.left?c.left:b.left,a):b},a.width=function(b){return arguments.length?(c=b,a):c},a.height=function(b){return arguments.length?(d=b,a):d},a.rows=function(b){return arguments.length?(f=b,a):f},a.cols=function(b){return arguments.length?(g=b,a):g},a.colors=function(b){return arguments.length?(r=b,a):r},a.strokecolor=function(b){return arguments.length?(h=b,a):h},a.strokeweight=function(b){return arguments.length?(i=b,a):i},a.rad=function(b){return arguments.length?(e=b,a):e},a.xValue=function(b){return arguments.length?(j=b,a):j},a.yValue=function(b){return arguments.length?(k=b,a):k},a.zValue=function(b){return arguments.length?(l=b,a):l},a.color=function(b){return arguments.length?(r=b,a):r},a},k4.histogram=function(){"use strict";function a(a){a.each(function(a){{var m=c-b.left-b.right,n=d-b.top-b.bottom;d3.select(this)}a=a.map(function(b,c){return[g.call(a,b,c),h.call(a,b,c)]}),i.domain(a.map(function(a){return a[0]})).rangeBands([0,m],e),j.domain([0,d3.max(a,function(a){return a[1]})]).nice().range([n,0]);var o=d3.select(this).selectAll("svg").data([a]),p=o.enter().append("svg").append("g").attr("class","inner");p.append("g").attr("class","bkgd"),p.append("g").attr("class","x axis"),p.append("g").attr("class","y axis"),p.append("g").attr("class","bargroup"),o.attr("width",c).attr("height",d);var q=p.selectAll("g.bargroup").selectAll(".vertices").data(a);q.exit().remove();q.enter().append("rect").attr("x",function(a){return i(a[0])}).attr("width",i.rangeBand()).attr("y",function(a){return j(a[1])}).attr("height",function(a){return n-j(a[1])});q.attr("class",function(a,b){return h(a,b)<0?"bar negative":"bar positive"}).style("fill",function(){return f});var r=o.select("g").attr("transform","translate("+b.left+", "+b.top+")");r.select("g.bkgd").append("rect").attr("width",m).attr("height",n),r.select("g.x.axis").attr("transform","translate(0,"+j.range()[0]+")").call(k),r.select("g.y.axis").call(l.tickSize(-m))})}var b={top:20,right:20,bottom:20,left:50},c=500,d=500,e=.2,f="#1191e0",g=function(a){return a[0]},h=function(a){return a[1]},i=d3.scale.ordinal(),j=d3.scale.linear(),k=d3.svg.axis().scale(i).orient("bottom").tickSize(-d).tickSubdivide(!0).tickPadding(6).ticks(10),l=d3.svg.axis().scale(j).orient("left").tickSize(c).tickPadding(6).ticks(10);return a.margin=function(c){return arguments.length?(b.top="undefined"!=typeof c.top?c.top:b.top,b.right="undefined"!=typeof c.right?c.right:b.right,b.bottom="undefined"!=typeof c.bottom?c.bottom:b.bottom,b.left="undefined"!=typeof c.left?c.left:b.left,a):b},a.width=function(b){return arguments.length?(c=b,a):c},a.height=function(b){return arguments.length?(d=b,a):d},a.color=function(a){return arguments.length?(e=a,f):f},a.bargap=function(b){return arguments.length?(e=b,a):e},a.xValue=function(b){return arguments.length?(g=b,a):g},a.yValue=function(b){return arguments.length?(h=b,a):h},a.color=function(b){return arguments.length?(f=b,a):f},a},k4.horizon=function(){"use strict";function a(a){a.each(function(a){var n,o,p,q,r=d3.select(this),s=1/0,t=-1/0,u=-1/0,v=a.map(function(a,b){var c=i.call(this,a,b),d=j.call(this,a,b);return s>c&&(s=c),c>t&&(t=c),-d>u&&(u=-d),d>u&&(u=d),[c,d]}),w=d3.scale.linear().domain([s,t]).range([0,c]),x=d3.scale.linear().domain([0,u]).range([0,d*e]),y=b(e,d,g);this.__chart__?(n=this.__chart__.x,o=this.__chart__.y,q=this.__chart__.t,p=this.__chart__.id):(n=w.copy(),o=x.copy(),q=y,p=++l),r.append("rect").attr("width",c).attr("height",d);var z=r.selectAll("defs").data([null]);z.enter().append("defs").append("clipPath").attr("id","d3_horizon_clip"+p).append("rect").attr("width",c).attr("height",d),z.select("rect").transition().duration(f).attr("width",c).attr("height",d),r.selectAll("g").data([null]).enter().append("g").attr("clip-path","url(#d3_horizon_clip"+p+")");var A=r.select("g").selectAll("path").data(d3.range(-1,-e-1,-1).concat(d3.range(1,e+1)),Number),B=k.interpolate(h).x(function(a){return n(a[0])}).y0(d*e).y1(function(a){return d*e-o(a[1])})(v),C=k.x(function(a){return w(a[0])}).y1(function(a){return d*e-x(a[1])})(v);A.enter().append("path").style("fill",m).attr("transform",q).attr("d",B),A.transition().duration(f).style("fill",m).attr("transform",y).attr("d",C),A.exit().transition().duration(f).attr("transform",y).attr("d",C).remove(),this.__chart__={x:w,y:x,t:y,id:p}}),d3.timer.flush()}function b(a,b,c){return"offset"===c?function(c){return"translate(0,"+(c+(0>c)-a)*b+")"}:function(c){return(0>c?"scale(1,-1)":"")+"translate(0,"+(c-a)*b+")"}}var c=960,d=40,e=1,f=0,g="offset",h="linear",i=function(a){return a[0]},j=function(a){return a[1]},k=d3.svg.area(),l=0,m=d3.scale.linear().domain([-1,0,0,1]).range(["#08519c","#bdd7e7","#bae4b3","#006d2c"]);return a.duration=function(b){return arguments.length?(f=+b,a):f},a.bands=function(b){return arguments.length?(e=+b,m.domain([-e,0,0,e]),a):e},a.mode=function(b){return arguments.length?(g=b+"",a):g},a.colors=function(b){return arguments.length?(m.range(b),a):m.range()},a.interpolate=function(b){return arguments.length?(h=b+"",a):h},a.x=function(b){return arguments.length?(i=b,a):i},a.y=function(b){return arguments.length?(j=b,a):j},a.width=function(b){return arguments.length?(c=+b,a):c},a.height=function(b){return arguments.length?(d=+b,a):d},a},k4.line=function(){"use strict";function a(a){a.each(function(a){var q=e-d.left-d.right,r=f-d.top-d.bottom;a=a.map(function(b,c){return[g.call(a,b,c),h.call(a,b,c),i.call(a,b,c)]}),k.domain(d3.extent(a,function(a){return a[0]})).nice().range([0,e-d.left-d.right]),l.domain([0,d3.max(a,function(a){return a[1]})]).nice().range([f-d.top-d.bottom,0]),o.interpolate(j),p.domain(a.map(function(a){return a[2]}));var s=p.domain().map(function(b){a.forEach(function(a){return console.log(a[2]===b),a[2]===b?{name:b,values:{x:a[0],y:a[1]}}:void 0})});console.log(s);var t=d3.select(this).selectAll("svg").data([a]),u=t.enter().append("svg").append("g");u.append("rect").attr("class","background"),u.append("g").attr("class","line"),u.append("g").attr("class","x axis"),u.append("g").attr("class","y axis"),u.append("g").attr("class","points"),t.attr("width",e).attr("height",f);var v=t.select("g").attr("transform","translate("+d.left+", "+d.top+")");v.select(".points").selectAll(".points").append("circle").data(a).enter().append("circle").attr("class","points").attr("cx",b).attr("cy",c).attr("r",4.5).style("fill","white").style("fill-opacity",function(){return 1}).style("stroke",function(a){return"object"==typeof p?p[a]:p(a[2])}).style("stroke-width",function(){return 1.5}),v.select(".background").attr("width",q).attr("height",r),v.select(".line").selectAll(".series").data(s).enter().append("path").attr("class","series").attr("d",function(a){return o(a.values)}).attr("fill","none").attr("stroke",function(a){return"object"==typeof p?p[a.name]:p(a.name)}).attr("stoke-width",3),v.select(".x.axis").attr("transform","translate(0,"+l.range()[0]+")").call(m.tickSize(-r)),v.select(".y.axis").call(n.tickSize(-q))})}function b(a){return k(a[0])}function c(a){return l(a[1])}var d={top:20,right:50,bottom:50,left:50},e=760,f=120,g=function(a){return a[0]},h=function(a){return a[1]},i=function(a){return a[2]},j="cardinal",k=d3.time.scale(),l=d3.scale.linear(),m=d3.svg.axis().scale(k).orient("bottom").ticks(10).tickPadding(6),n=d3.svg.axis().scale(l).orient("left").ticks(10).tickPadding(6),o=d3.svg.line().x(function(a){return k(a.x)}).y(function(a){return l(a.y)}),p=d3.scale.category10();return a.margin=function(b){return arguments.length?(d.top="undefined"!=typeof b.top?b.top:d.top,d.right="undefined"!=typeof b.right?b.right:d.right,d.bottom="undefined"!=typeof b.bottom?b.bottom:d.bottom,d.left="undefined"!=typeof b.left?b.left:d.left,a):d},a.width=function(b){return arguments.length?(e=b,a):e},a.height=function(b){return arguments.length?(f=b,a):f},a.x=function(b){return arguments.length?(g=b,a):g},a.y=function(b){return arguments.length?(h=b,a):h},a.z=function(b){return arguments.length?(i=b,a):i},a.interpolate=function(b){return arguments.length?(j=b,a):j},a.color=function(b){return arguments.length?(p=b,a):p},a},k4.map=function(){"use strict";function a(a){a.each(function(a){function g(){var a=s.invert([c/2,d/2]),b=d3.geo.greatArc(),e=s.scale();q.selectAll(".label").attr("text-anchor",function(a){var b=s(a.geometry.coordinates)[0];return c/2-20>b?"end":c/2+20>b?"middle":"start"}).attr("transform",function(a){var b=s(a.geometry.coordinates),d=b[0],e=b[1],f=6,g=-3;return c/2>d&&(f=-6),g=c/2-20>d?-1:c/2+20>d?-6:-1,"translate("+(d+f)+","+(e+g)+")"}).style("opacity",function(){return t(e)}).style("font-size",function(){return u(e)}).style("display",function(c){var d=b.distance({source:c.geometry.coordinates,target:a});return d>1.57?"none":"inline"}),q.selectAll(".point").style("opacity",function(){return t(e)})}function l(){q.selectAll("path").attr("d",v),g(),console.log("Map center: ",-s.rotate()[1],-s.rotate()[0])}function m(){d3.event&&s.scale(d3.event.scale),q.selectAll("*").attr("d",v),g(),console.log("Map scale: ",d3.event.scale)}function n(){if(B){var a=[d3.event.pageX,d3.event.pageY],b=[C[0]+(a[0]-B[0])/6,C[1]+(B[1]-a[1])/6];b[1]>55&&(b[1]=55),b[1]<-55&&(b[1]=-55),s.rotate(b),l()}}function o(){B&&(n(),B=null)}function p(){B=[d3.event.pageX,d3.event.pageY],C=s.rotate(),d3.event.preventDefault()}var q=(c-b.left-b.right,d-b.top-b.bottom,d3.select(this).selectAll("svg").data([0]));q.enter().append("svg").attr("width",c).attr("height",d);var r=["#ffebbc","#f8d294","#f2b96e","#ed9d4c","#e97f2e","#e55c13","#e02c00"],s=(d3.scale.quantile().domain([0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]).range(r),d3.geo.orthographic().scale(e).translate([c/2,d/2]).precision(.1).rotate(k).clipAngle(90).clipExtent([[1,1],[c-1,d-1]])),t=d3.scale.linear().domain([200,150]).range([1,0]),u=d3.scale.linear().domain([500,150]).range([12,7]),v=d3.geo.path().projection(s).pointRadius(2),w=d3.geo.graticule(),x=a[0],y=a[1],z=a[2];q.on("mousemove",n).on("mouseup",o).on("mousedown",p).call(d3.behavior.zoom().translate(s.translate()).scale(s.scale()).scaleExtent([50,500]).on("zoom",function(){m()}));var A=q.append("defs").append("radialGradient").attr("id","globe_shading").attr("cx","50%").attr("cy","40%");A.append("stop").attr("offset","50%").attr("stop-color","#fff").attr("stop-opacity","0.2"),A.append("stop").attr("offset","100%").attr("stop-color","#253d56").attr("stop-opacity","0.4"),q.append("path").datum({type:"Sphere"}).attr("class","water noclick").style("fill",h).attr("d",v),q.append("path").datum(w).attr("class","graticule noclick").attr("d",v),q.append("path").datum(x).attr("class","land noclick").attr("d",v),f&&q.append("path").datum({type:"Sphere"}).attr("class","noclick").style("fill","url(#globe_shading)"),q.append("g").attr("class","countries").selectAll("path").data(y).enter().append("path").attr("class","countries").attr("d",v).style("fill",i).on("mouseover",function(a){console.log("country id: "+a.id)}),q.append("path").datum({type:"Sphere"}).attr("class","edge noclick").attr("d",v),q.append("g").attr("class","points noclick").selectAll("text").data(z).enter().append("path").attr("class","point").style("fill",j).attr("d",v),q.append("g").attr("class","labels noclick").selectAll("text").data(z).enter().append("text").attr("class","label").text(function(a){return a.properties.name}),l();var B,C})}{var b={top:10,right:10,bottom:10,left:10},c=600,d=600,e=245,f=!1,g=!0,h="#ddd",i="#ddd",j="#ddd",k=[52.8,-49.6];d3.scale.quantile()}return a.margin=function(c){return arguments.length?(b.top="undefined"!=typeof c.top?c.top:b.top,b.right="undefined"!=typeof c.right?c.right:b.right,b.bottom="undefined"!=typeof c.bottom?c.bottom:b.bottom,b.left="undefined"!=typeof c.left?c.left:b.left,a):b},a.width=function(b){return arguments.length?(c=b,a):c},a.height=function(b){return arguments.length?(d=b,a):d},a.rotate=function(b){return arguments.length?(k=b,a):k},a.scale=function(b){return arguments.length?(e=b,a):e},a.shading=function(b){return arguments.length?(f=b,a):f},a.labels=function(b){return arguments.length?(g=b,a):g},a.watercolor=function(b){return arguments.length?(h=b,a):h},a.countrycolor=function(b){return arguments.length?(i=b,a):i},a.pointcolor=function(b){return arguments.length?(j=b,a):j},a},k4.pie=function(){"use strict";function a(a){a.each(function(a){a=a.map(function(b,c){return[f.call(a,b,c),g.call(a,b,c)]}),k.outerRadius(h).innerRadius(i),l.sort(e).value(function(a){return a[1]});var d=d3.select(this).append("svg");d.attr("width",b).attr("height",c);var m=d.append("g").attr("transform","translate("+b/2+", "+c/2+")"),n=m.selectAll(".arc").data(l(a)).enter().append("g").attr("class","arc").style("stroke-width",2);n.append("path").attr("d",k).style("fill",function(a){return j(a.data[0])}),n.append("text").attr("transform",function(a){return"translate("+k.centroid(a)+")"}).attr("dy",".35em").style("text-anchor","middle").style("fill","white").text(function(a){return console.log(a),a.data[0]})})}var b=500,c=500,d=Math.min(b,c)/2,e=null,f=function(a){return a[0]},g=function(a){return a[1]},h=d-10,i=0,j=d3.scale.category10(),k=d3.svg.arc(),l=d3.layout.pie();return a.width=function(c){return arguments.length?(b=c,a):b},a.height=function(b){return arguments.length?(c=b,a):c},a.radius=function(b){return arguments.length?(d=b,a):d},a.sort=function(b){return arguments.length?(e=b,a):e},a.label=function(b){return arguments.length?(f=b,a):f},a.value=function(b){return arguments.length?(g=b,a):g},a.outerRadius=function(b){return arguments.length?(h=b,a):h},a.innerRadius=function(b){return arguments.length?(i=b,a):i},a.color=function(b){return arguments.length?(j=b,a):j},a},k4.scatterplot=function(){"use strict";function a(a){a.each(function(a){var n=c-b.left-b.right,o=d-b.top-b.bottom;a=a.map(function(b,c){return[e.call(a,b,c),f.call(a,b,c),g.call(a,b,c)]}),h.domain([0,d3.max(a,function(a){return a[0]})]).nice().range([0,n]),i.domain([0,d3.max(a,function(a){return a[1]})]).nice().range([o,0]),j.domain([0,d3.max(a,function(a){return a[2]})]).range([2,10]);var p=d3.select(this).selectAll("svg").data([a]),q=p.enter().append("svg").append("g").attr("class","inner");q.append("g").attr("class","bkgd"),q.append("g").attr("class","x axis"),q.append("g").attr("class","y axis"),q.append("g").attr("class","points"),p.attr("width",c).attr("height",d);var r=q.select("g.points").selectAll(".vertices").data(a).enter().append("circle").attr("class","vertices");r.attr("cx",function(a){return h(a[0])}).attr("cy",function(a){return i(a[1])}).attr("r",function(a){return j(a[2])}).style("fill",function(a){return m(a[2])}).style("fill-opacity",function(){return.4}).style("stroke",function(a){return m(a[2])}).style("stroke-width",function(){return 1.5});var s=p.select("g").attr("transform","translate("+b.left+", "+b.top+")");s.select("g.bkgd").append("rect").attr("width",n).attr("height",o),s.select("g.x.axis").attr("transform","translate(0,"+i.range()[0]+")").call(k.tickSize(-o)),s.select("g.y.axis").call(l.tickSize(-n))})}var b={top:20,right:20,bottom:20,left:50},c=500,d=500,e=function(a){return a[0]},f=function(a){return a[1]},g=function(a){return a[2]},h=d3.scale.linear(),i=d3.scale.linear(),j=d3.scale.linear(),k=d3.svg.axis().scale(h).orient("bottom").tickSize(d).tickPadding(6).ticks(10),l=d3.svg.axis().scale(i).orient("left").tickSize(c).tickPadding(6).ticks(10),m=d3.scale.category10();return a.margin=function(c){return arguments.length?(b.top="undefined"!=typeof c.top?c.top:b.top,b.right="undefined"!=typeof c.right?c.right:b.right,b.bottom="undefined"!=typeof c.bottom?c.bottom:b.bottom,b.left="undefined"!=typeof c.left?c.left:b.left,a):b},a.width=function(b){return arguments.length?(c=b,a):c},a.height=function(b){return arguments.length?(d=b,a):d},a.xValue=function(b){return arguments.length?(e=b,a):e},a.yValue=function(b){return arguments.length?(f=b,a):f},a.zValue=function(b){return arguments.length?(g=b,a):g},a.color=function(b){return arguments.length?(m=b,a):m},a},k4.sparkline=function(){"use strict";function a(a){a.each(function(a){a=a.map(function(b,c){return[g.call(a,b,c),h.call(a,b,c)]}),console.log(a),j.domain(d3.extent(a,function(a){return a[0]})).range([0,e-d.left-d.right]),k.domain([0,d3.max(a,function(a){return a[1]})]).range([f-d.top-d.bottom,0]),l.interpolate(i);var b=d3.select(this).selectAll("svg").data([a]),c=b.enter().append("svg").append("g").attr("transform","translate("+d.left+", "+d.top+")");c.append("path").attr("class","sparkline").attr("d",l),b.attr("width",e).attr("height",f)})}function b(a){return j(a[0])}function c(a){return k(a[1])}var d={top:20,right:20,bottom:20,left:50},e=760,f=120,g=function(a){return a[0]},h=function(a){return a[1]},i="linear",j=d3.time.scale(),k=d3.scale.linear(),l=d3.svg.line().x(b).y(c);return a.margin=function(b){return arguments.length?(d.top="undefined"!=typeof b.top?b.top:d.top,d.right="undefined"!=typeof b.right?b.right:d.right,d.bottom="undefined"!=typeof b.bottom?b.bottom:d.bottom,d.left="undefined"!=typeof b.left?b.left:d.left,a):d},a.width=function(b){return arguments.length?(e=b,a):e},a.height=function(b){return arguments.length?(f=b,a):f},a.x=function(b){return arguments.length?(g=b,a):g},a.y=function(b){return arguments.length?(h=b,a):h},a.interpolate=function(b){return arguments.length?(i=b,a):i},a},k4.spiderChart=function(){"use strict"},k4.sunburst=function(){"use strict";function a(a){a.each(function(a){var i=d3.select(this).append("svg").attr("width",b).attr("height",c).append("g").attr("transform","translate("+b/2+","+.52*c+")");g.sort(null).size([2*Math.PI,d*d]).value(f),i.datum(a).selectAll("path").data(g.nodes).enter().append("path").attr("display",function(a){return a.depth?null:"none"}).attr("d",h).style("stroke","#fff").style("fill",function(a){return e((a.children?a:a.parent).name)}).style("fill-rule","evenodd")})}var b=960,c=700,d=Math.min(b,c)/2,e=d3.scale.category20c(),f=(d3.scale.linear().range([0,2*Math.PI]),d3.scale.sqrt().range([0,d]),function(){return 1}),g=d3.layout.partition(),h=d3.svg.arc().startAngle(function(a){return a.x}).endAngle(function(a){return a.x+a.dx}).innerRadius(function(a){return Math.sqrt(a.y)}).outerRadius(function(a){return Math.sqrt(a.y+a.dy)});return a.width=function(c){return arguments.length?(b=c,a):b},a.height=function(b){return arguments.length?(c=b,a):c},a.radius=function(a){return arguments.length?d=a:d},a.color=function(b){return arguments.length?(e=b,a):e},a.x=function(b){return arguments.length?(xValue=b,a):xValue},a.y=function(b){return arguments.length?(yValue=b,a):yValue},a.value=function(b){return arguments.length?(f=b,a):f},a},k4.treemap=function(){"use strict"},k4.table=function(){"use strict";function a(a){a.each(function(a){b=d.call(this,a),a=c.call(this,a);var e=d3.select(this).append("table").attr("id","data-table").attr("class","table table-striped table-bordered table-hover").attr("cellpadding",0).attr("cellspacing",0).attr("border",0).style("border-collapse","collapse"),f=e.append("thead").attr("class","sorting"),g=e.append("tbody");f.append("tr").selectAll("th").data(b).enter().append("th").text(function(a){return a}).style("border","1px black solid").style("padding","5px");var h=g.selectAll("tr").data(a).enter().append("tr");h.selectAll("td").data(function(a){return b.map(function(b){return{column:b,value:a[b]}})}).enter().append("td").text(function(a){return a.value}).style("border","1px black solid").style("padding","5px"),e.selectAll("thead th").text(function(a){return a.charAt(0).toUpperCase()+a.substr(1)})})}var b,c=function(a){return a},d=function(a){return d3.keys(a[0])};return a.row=function(b){return arguments.length?(c=b,a):c},a.column=function(b){return arguments.length?(d=b,a):d},a};