<div class="modal-header data-source-configuration-header">
   <!-- This file is automatically generated using pluto meta-file framework
        Please do not make any change in this file directly. -->

    <div class="row data-source-configuration-header-row">
        <div class = "
        col-sm-3 col-md-3 
        
        data-source-configuration-header-col" ng-style="{opacity:first_step && 1 || 0.2}">
           <div ng-if="editDataSource==true">
               <h4 class="modal-title data-source-configuration-title">
                   <span class="data-source-configuration-step">1</span>
                   EDIT ENTRY
                   <img src="../assets/images/Arrow.png"
                   class="data-source-configuration-header-arrow"></h4>
           </div>
           <div ng-if="editDataSource==false">
               <h4 class="modal-title data-source-configuration-title"><span class="data-source-configuration-step">1</span> ADD ENTRY
                   <img src="../assets/images/Arrow.png" class="data-source-configuration-header-arrow">
               </h4>
          </div>
        </div>

         
        <div class = "col-sm-3 col-md-3 data-source-configuration-header-col" ng-style="{opacity:second_step && 1 || 0.2}">
           <div ng-if="editDataSource==false">
              <h4 class="modal-title data-source-configuration-title">
                <span class="data-source-configuration-step">2</span>
                     ADD TARGETS
                <img src="../assets/images/Arrow.png" class="data-source-configuration-header-arrow">
              </h4>
            </div>
            <div ng-if="editDataSource==true">
              <h4 class="modal-title data-source-configuration-title">
                <span class="data-source-configuration-step">2</span>
                     EDIT TARGETS
                <img src="../assets/images/Arrow.png" class="data-source-configuration-header-arrow">
              </h4>
            </div>
        </div>
        <div class= "col-sm-3 col-md-3 data-source-configuration-header-col" ng-style="{opacity:third_step && 1 || 0.2}">
            <h4 class="modal-title data-source-configuration-title">
                <span class="data-source-configuration-step">3</span>
        
                CONFIGURATION
               <img src="../assets/images/Arrow.png" class="data-source-configuration-header-arrow">
            </h4>
        </div>
        <div class= 
        "col-sm-3 col-md-3 data-source-configuration-header-col" ng-style="{opacity:fourth_step && 1 || 0.2}">
            <h4 class="modal-title data-source-configuration-title">
                <span class="data-source-configuration-step">4</span>
        
                VERIFY DATA</h4>
        </div>
    </div>
</div>
<form class="form-horizontal addDataSourceForm" name="addDataSourceForm" novalidate>
<div ng-show="first_step">
     <div class="modal-body">
       <div class="add_data_source_configuration_tab">
   
      
      
         
            <div class="form-group" ng-class="{'has-error':
            addDataSourceForm.name.$invalid &&
            !addDataSourceForm.name.$pristine}">
         
         <div class="row">
           <div class="col-sm-3 col-md-3">
             <label class="control-label data_source_configuration_attribute_name">Name
             <span class="data-source-field-tooltip">
             <a href="" uib-tooltip="Name of this url heartbeat configuration. The heartbeat data sources with the same name within the different types of heartbeat monitoring (Device Heartbeat, Service Heartbeat, Tracepath and URL Heartbeat) are bundled together and a single heartbeat configuration is generated." tooltip-placement="bottom"><i class="fa fa-question-circle"></i></a><span>
             </label>
           </div>
           
              <div class="col-sm-6 col-md-6 align-down">

                  
                        <input type="text"
                     
                  

                    class="form-control" ng-model="name"
                    required
                    
                    name="name"
                    ng-pattern="/^[a-zA-Z0-9_,.()/@#$%^&* -]{3,64}$/"
                    ng-disabled="editDataSource==true">
                    <div class="help-block" ng-show="addDataSourceForm.name.$error.addDataSourceUniqueValidate">Name should by unique within this data source.</div>
                    <div class="help-block" ng-show="addDataSourceForm.name.$error.pattern">Name should contain minimum of 3 characters and maximum of 64 characters</div>
                  </div>
              
           
         </div>
       </div>
        
       
         
            <div class="form-group" ng-class="{'has-error':
            addDataSourceForm.port.$invalid &&
            !addDataSourceForm.port.$pristine}">
         
         <div class="row">
           <div class="col-sm-3 col-md-3">
             <label class="control-label data_source_configuration_attribute_name">Port
             <span class="data-source-field-tooltip">
             <a href="" uib-tooltip="TCP Port on which data is sent to vuSmartMaps" tooltip-placement="bottom"><i class="fa fa-question-circle"></i></a><span>
             </label>
           </div>
           
              
                  
                    <div class="col-sm-6 col-md-6 align-down">
                      
                         
                            <input type="number"
                            
                         
                         class="form-control"
                         ng-model="port"
                         required
                         
                         name="port"
                         ng-pattern="/^([1-9]|[1-9][0-9]|[1-9][0-9][0-9]|[1-9][0-9][0-9][0-9]|[1-5][0-9][0-9][0-9][0-9]|6[0-4][0-9][0-9][0-9]|65[0-4][0-9][0-9]|655[0-2][0-9]|6553[0-5])$/">
                         <div class="help-block" ng-show="addDataSourceForm.port.$error.pattern">Port should be between 1 - 65535</div>
                      
                    </div>
                  
              
           
         </div>
       </div>
        
       
         
            <div class="form-group" ng-class="{'has-error':
            addDataSourceForm.run_in_shipper.$invalid &&
            !addDataSourceForm.run_in_shipper.$pristine}">
         
         <div class="row">
           <div class="col-sm-3 col-md-3">
             <label class="control-label data_source_configuration_attribute_name">Run in Shipper
             <span class="data-source-field-tooltip">
             <a href="" uib-tooltip="Run the Heartbeat Agent in the Shipper or not?" tooltip-placement="bottom"><i class="fa fa-question-circle"></i></a><span>
             </label>
           </div>
           <div class="col-sm-6 col-md-6 align-down">
                <select class="form-control"
                 ng-model="run_in_shipper"
                 name="run_in_shipper" required>
                <option value="No">No</option>
                   <option value="Yes">Yes</option>
                   
                 
                </select>
             </div>
           
         </div>
       </div>
        
       
         <div class="form-group" ng-class="{'has-error':
            addDataSourceForm.standalone_shipper.$invalid &&
            !addDataSourceForm.standalone_shipper.$pristine}"
            ng-show="standalone_shipper_list.length > 0 && standalone_shipper_list[0] !== ''"
         
         <div class="row">
           <div class="col-sm-3 col-md-3">
             <label class="control-label data_source_configuration_attribute_name">Collector IP
             <span class="data-source-field-tooltip">
             <a href="" uib-tooltip="IP Address of the standalone shipper,if configuring for main shipper add 127.0.0.1" tooltip-placement="bottom"><i class="fa fa-question-circle"></i></a><span>
             </label>
           </div>
           
              
                  
                    <div class="col-sm-6 col-md-6 align-down">
                      <select class="form-control"
                         ng-model="standalone_shipper"
                         name="standalone_shipper"
                         ng-options="standalone_shipper for
                         standalone_shipper in
                         standalone_shipper_list">
                         </select>
                      
                    </div>
                  
              
           
         </div>
       </div>
        
       
       
   
       </div>
       <div class="modal-footer">
         <button class="btn btn-inverse" ng-click="cancel()">Cancel</button>
<button class="btn btn-primary"
             ng-click="second_step=true;first_step=false" ng-disabled="editDataSource==false && (addDataSourceForm.$invalid || addDataSourceForm.$pristine) || 
             
             submitDisable()">Next</button>

       </div>
     </div>
   </div>
  </div>
<div ng-show="second_step">
     <div class="modal-body">
         <div class="add_data_source_configuration_tab">
            
            
            
            
            
          <div class="form-group" ng-class="{'has-error':
                 addDataSourceForm.uh_heartbeatuh_interval.$invalid &&
                 !addDataSourceForm.uh_heartbeatuh_interval.$pristine}">
                              <div class="row data-source-agent-config-row datasource-wrapper">
                                 <div class="col-sm-3 col-md-3">
                                       <label class="control-label data_source_configuration_attribute_name">Interval
                                          <span class="data-source-field-tooltip">
                                          <a href="" uib-tooltip="Interval in seconds for each heartbeat" tooltip-placement="bottom"><i class="fa fa-question-circle"></i></a><span>
                                       </label>
                                 </div>
                                 
                                 <div class="col-sm-6 col-md-6">
                                   
                                      
                                          <input type="text"
                                      
                                    
                                    <input type="text" class="form-control"
                                    ng-model="uh_heartbeat.uh_interval"
                                    name="uh_heartbeatuh_interval"
                                    
                                    required
                                     
                                    
                                    ng-pattern="/^([1-9][0-9]|[1-9][0-9][0-9]|[1-9][0-9][0-9][0-9]|[1-9][0-9][0-9][0-9][0-9]|100000)$/">
                                    <div class="help-block"
                                    ng-show="addDataSourceForm.uh_heartbeatuh_interval.$error.pattern">Interval should be greater than or equal to 10 and less than 100000</div>
                                 </div>
                                 
                              </div>
          </div> <!-- form-group -->
                           
                        
          <div class="form-group" ng-class="{'has-error':
                 addDataSourceForm.uh_heartbeatuh_overall_timeout.$invalid &&
                 !addDataSourceForm.uh_heartbeatuh_overall_timeout.$pristine}">
                              <div class="row data-source-agent-config-row datasource-wrapper">
                                 <div class="col-sm-3 col-md-3">
                                       <label class="control-label data_source_configuration_attribute_name">Overall Timeout
                                          <span class="data-source-field-tooltip">
                                          <a href="" uib-tooltip="Overall Timeout for ping (in msec). If ping does not finishes within this time, we decalre the host unreachable" tooltip-placement="bottom"><i class="fa fa-question-circle"></i></a><span>
                                       </label>
                                 </div>
                                 
                                 <div class="col-sm-6 col-md-6">
                                   
                                      
                                          <input type="text"
                                      
                                    
                                    <input type="text" class="form-control"
                                    ng-model="uh_heartbeat.uh_overall_timeout"
                                    name="uh_heartbeatuh_overall_timeout"
                                    
                                    required
                                     
                                    
                                    ng-pattern="/^(([3-9][0-9][0-9][0-9])|([1-9][0-9][0-9][0-9][0-9])|([1-5][0-9][0-9][0-9][0-9][0-9])|600000)$/">
                                    <div class="help-block"
                                    ng-show="addDataSourceForm.uh_heartbeatuh_overall_timeout.$error.pattern">Overall Timeout should be greater than 3000 and less than or equal to 600000</div>
                                 </div>
                                 
                              </div>
          </div> <!-- form-group -->
                           
                        <div class="row data-source-agent-config-row datasource-wrapper">
                                 <div class="col-sm-3 col-md-3">
                                       <label class="control-label data_source_configuration_attribute_name">URL
                                          <span class="data-source-field-tooltip">
                                          <a href="" uib-tooltip="URL information" tooltip-placement="bottom"><i class="fa fa-question-circle"></i></a><span>
                                       </label>
                                 </div>
                                 <div class="col-sm-6 col-md-6 align-down">
                                   <table class="table table-hover table-bordered table-width">
                                       <thead>
                                           <tr>
                                             
                                                
                                                <th>
                                                            URL Address
                                                            </th>
                                                      
                                                   
                                                
                                             
                                             <th>
                                             Action
                                             </th>
                                           </tr>
                                       </thead>
                                       <tbody>
                                          <tr ng-repeat="row in uh_heartbeat.uh_url track by $index">
                                             
                                                
                                                <td>
                                                         {{row.uh_url_address}}
                                                      </td>
                                                      
                                                   
                                                
                                             
                                             <td>
                                             <a href="">
                                              <span class="data-source-target-action-delete"
                                                  ng-click="delete_uh_url(row); addDataSourceForm.$setDirty(true);"><i class="fa fa-trash-o"></i></span>
                                             </a>
                                             </td>
                                           </tr>
                                           <tr ng-repeat="row in new_uh_url track by $index">
                                             
                                                
                                                <td>
                                             <div
                                             ng-form="uh_urlFormuh_url_address"
                                             ng-class="{'has-error':uh_urlFormuh_url_address.uh_url_address.$invalid
                                             &&
                                             !uh_urlFormuh_url_address.uh_url_address.$pristine}">
                                                
                                                      <input type="text"
                                                   
                                                
                                                 class="form-control"
                                                 ng-model="new_uh_url[$index]['uh_url_address']"
                                                 name="uh_url_address"
                                                 
                                                 required
                                                 
                                                 ng-pattern="/^((http|https)\:\/\/)[a-zA-Z0-9\.\/\?\:@\-\%_=#]+\.([a-zA-Z0-9\&\.\/\?\:@\-\%_=#]){1,255}$/">
                                                 <div class="help-block"
                                                 ng-show="uh_urlFormuh_url_address.uh_url_address.$error.pattern">URL address should contain 'http(https)://' followed by either IP address or String(domain name). It cannot exceed 255 characters</div>
                                             </div>
                                             </td>
                                                      
                                                   
                                                
                                             
                                             <td>
                                             <a href="">
                                              <span class="data-source-target-action-delete"
                                                  ng-click="delete_new_uh_url(row); addDataSourceForm.$setDirty(true);"><i class="fa fa-trash-o"></i></span>
                                             </a>
                                             </td>
                                           </tr>
                                       </tbody>
                                   </table>
                                  </div>
                                  <div class="col-sm-2 col-md-2 data-source-add-agent-config-button">
                                  <button class="btn btn-primary" ng-click="add_uh_url();">Add URL</button>
                                  </div>
                              </div>

                           
                        
                     
                  
                  
               
            

       </div>
     </div>
     <div class="modal-footer">
         <button class="btn btn-inverse" ng-click="first_step=true;second_step=false">Back</button>
         <button type="submit" id = "data_source_submit" class="btn btn-primary" ng-click="saveDataSource(addDataSourceForm.$valid)"
             ng-disabled="addDataSourceForm.$invalid || addDataSourceForm.$pristine || submitDisable()">Save & Continue</button>
     </div>
  </div>


</form>
<div ng-show="third_step">

         <div class="add_data_source_configuration_tab">
             <div class="add_data_source_remote_config_tab_body">
            <p>URL heartbeat is a mechanism to continuously check if a URL is up and running.</p> <p>A lightweight agent, 'heartbeat' is used to send data to vuSmartMaps. The agent is available for download for all supported OS. Click on the corresponding link for your OS to download the agent and the istallation script.</p> <p><a href=''><i class='data-source-import-template-link' ng-click="downloadDataSourceAgent('linux_64')">Linux 64 bit</i> </p><p></a> <a href=''> <i class='data-source-import-template-link' ng-click="downloadDataSourceAgent('windows_64')">Windows 64 bit</i></a></p> <p>Please see below for steps to install the agent.</p> <div> <p><b>To install the agent in Windows:</b> </p> <p>1. Run Power Shell in Administrator mode</p> <p>2. Extract the downloaded agent into a desired folder.</p> <p>3. Execute the power shell installation script. This will install the pre configured agent and start it.</p> </div> <div> <p><b>To install the agent in Linux:</b></p> <p>1. Extract the downloaded agent into a desired directory.</p> <p>2. Execute the installation script in SUDO mode. This will install the pre configured agent and start it.</p> </div> <p><b>Note:</b> The heartbeat configuration file (heartbeat.yml), downloaded with this agent package contains the configuration of all other heartbeat data sources (Device Heartbeat, Service Heartbeat and Tracepathbeat) that has the same name as this url heartbeat.</p> <hr><p> If the agent is already installed and to re-configure it, follow the below steps</p> <div> <p><b>To configure the agent in Windows:</b> </p> <p>1. Download the agent configuration package from <a href='' style='color:blue'><span ng-click="downloadDataSourceAgentConfiguration('windows_64')">here</span></a></p> <p>2. Extract the downloaded package. </p> <p> 3. Open Powershell with admin privilages and run the <i>update_heartbeat_config.ps1 {Directory of Heartbeat Installation}</i>. For Eg. <i>update_heartbeat_config.ps1 C://heartbeat</i>.</p> <p>4. This reconfigure the heartbeat and restart it.</p> </div> <div> <p><b>To configure the agent in Linux:</b> </p> <p>1. Download the agent configuration package from <a href='' style='color:blue'><span ng-click="downloadDataSourceAgentConfiguration('linux_64')">here</span></a></p> <p><p>2. Extract the downloaded package. </p> <p> 3. Run the <i>update_heartbeat_config.sh</i> with SUDO permissions.<p>4. This reconfigure the heartbeat and restart it.</p> </div>
          </div>
       </div>
       <div class="modal-footer">
<button class="btn btn-inverse" ng-click="second_step=true;third_step=false">Back</button>
         <button class="btn btn-primary" ng-click="fourth_step=true;third_step=false">Next</button>

       </div>
</div>
<div ng-show="fourth_step">

   <form class="form-horizontal" name="addDataRecvForm" novalidate>
     <div class="modal-body">
         <div class="add_data_source_configuration_tab">
        <div class="form-group" ng-class="{'has-error': addDataSourceForm.vendor.$invalid && !addDataSourceForm.vendor.$pristine}">
            <h4 class="add_data_source_data_received_text">
             Verify if data has been received from this data source. Data from
             this data source will be indexed and ready for your use.</h4>
           <div class="row add_data_source_data_received_row">
             <div class="col-sm-1 col-md-1"> </div>
             <div class="col-sm-3 col-md-3">
                  <label>Index Name:</label>
             </div>
             <div class="col-sm-6 col-md-6 align-down">
                 {{index}}
             </div>
           </div>
           <div class="row add_data_source_data_received_row">
               <div class="col-sm-1 col-md-1"> </div>
               <div class="col-sm-3 col-md-3">
                 <label>Interval:</label>
               </div>
               <div class="col-sm-6 col-md-6 align-down">
                   <select class="form-control" ng-model="interval" name="interval" required>
                     <option value="minutes_15">Last 15 Minutes</option>
                     <option value="hour_1">Last 1 Hour</option>
                     <option value="hours_4">Last 4 Hours</option>
                     <option value="day_1">Last 1 Day</option>
                 </select>
               </div>
               <div class="col-sm-1 col-md-1 align-down">
                 <button class="btn btn-primary" ng-click="refreshDataSource()">Refresh</button>
               </div>
           </div>
           <div class="row add_data_source_data_received_row">
             <div class="col-sm-1 col-md-1"> </div>
             <div class="col-sm-3 col-md-3 add_data_source_data_received_row_label">
                  <label>Data Received:</label>
             </div>
             <div class="col-sm-6 col-md-6 align-down">
                    <a href='' ng-if="data_received == true" uib-tooltip="Data is being received from this data source" tooltip-placement="bottom">
                        <span class="fa-stack" ng-click="editConfig(row, true, false)">
                            <i class="fa-stack-1x fa fa-database add_data_source_data_received_icon add_data_source_data_received_icon_green"></i>
                        </span>
                    </a>
                    <a href='' ng-if="data_received == false" uib-tooltip="Data has not been received from this data source in last 15 minutes" tooltip-placement="bottom">
                        <span class="fa-stack" ng-click="editConfig(row, true, false)">
                            <i class="fa-stack-1x fa fa-database add_data_source_data_received_icon"></i>
                            <i class="fa fa-ban fa-stack-2x add_data_source_data_received_icon_red"></i>
                        </span>
                    </a>
             </div>
           </div>
       </div>  <!-- form group -->
      </div>  <!-- height -->
    </div> <!-- modal-bidy -->
    <div class="modal-footer">
<button class="btn btn-inverse" ng-click="third_step=true;fourth_step=false">Back</button>

        <button class="btn btn-primary" ng-click="closeDataSource()">Done</button>
    </div>
  </form>
</div>