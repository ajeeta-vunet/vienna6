<div class="vis-editor-sidebar">
  <div class="sidebar-container">
    <form class="sidebar-list" ng-submit="doApply()" name="visualizeEditor">
      <ul class="list-unstyled">

        <!-- metrics -->
        <vis-editor-agg-group
          ng-if="vis.type.schemas.metrics"
          vis="vis"
          saved-vis="savedVis"
          schemas="vis.type.schemas.metrics"
          group="vis.aggs.bySchemaGroup.metrics"
          group-name="'metrics'"
          >
        </vis-editor-agg-group>

        <!-- buckets -->
        <vis-editor-agg-group
          ng-if="vis.type.schemas.buckets"
          vis="vis"
          saved-vis="savedVis"
          schemas="vis.type.schemas.buckets"
          group="vis.aggs.bySchemaGroup.buckets"
          group-name="'buckets'"
          >
        </vis-editor-agg-group>

        <!-- apply/discard -->
        <li ng-if="stateDirty" class="sidebar-item">
          <button
            type="submit"
            ng-disabled="httpActive.length || visualizeEditor.$invalid"
            class="sidebar-item-button success">
            Apply
          </button>
          <button
            type="button"
            ng-click="doReset()"
            ng-disabled="visualizeEditor.$invalid"
            class="sidebar-item-button warn">
            Discard
          </button>
        </li>
      </ul>
    </form>
  </div>
</div>