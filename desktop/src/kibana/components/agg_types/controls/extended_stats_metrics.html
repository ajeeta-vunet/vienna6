<div class="form-group" ng-controller="agg.type.params.byName.metrics.controller">
  <label for="field">
    Metrics
  </label>
  <p class="text-danger" ng-if="aggForm.metric.$invalid">
    select at least one metric
  </p>
  <input type="hidden" ng-model="agg.params.metrics[0]" name="metric" required>
  <div ng-repeat="metric in metrics" class="checkbox">
    <label>
      <input ng-model="values[metric]" type="checkbox"> {{metric}}
    </label>
  </div>
</div>