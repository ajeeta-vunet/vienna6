#!/usr/bin/env ruby
#
# This file was generated by RubyGems.
#
# The application 'puma' is installed as part of a gem, and
# this file is here to facilitate running it.
#

require 'rubygems'

version = ">= 0"

HERE = File.expand_path(File.dirname(__FILE__))

if ARGV.first
  str = ARGV.first
  str = str.dup.force_encoding("BINARY") if str.respond_to? :force_encoding
  if str =~ /\A_(.*)_\z/
    version = $1
    ARGV.shift
  end
end

# Include the puma config unless it's been overriden
unless ARGV.include?('--port') or ARGV.include?('-p')
  ARGV << '--port'
  ARGV << '5601'
end

# Include the rack config if it hasn't been included
if (ARGV.grep(/config\/web\.ru/)).empty?
  ARGV << "#{HERE}/../config/web.ru"
end

gem 'puma', version
load Gem.bin_path('puma', 'puma', version)
