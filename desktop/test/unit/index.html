<!DOCTYPE html><html><head><title>Kibana4 Tests</title><link rel="stylesheet" href="/node_modules/mocha/mocha.css"></head><body><div id="mocha"></div><script src="/node_modules/expect.js/expect.js"></script><script src="/node_modules/mocha/mocha.js"></script><script src="/src/bower_components/requirejs/require.js"></script><script src="/src/kibana/require.config.js"></script><script type="text/javascript">window.COVERAGE = !!(/coverage/i.test(window.location.search));
mocha.setup('bdd');

require.config({
  baseUrl: '/src/kibana',
  paths: {
    testUtils: '../../test/utils',
    sinon: '../../test/utils/sinon'
  },
  shim: {
    'sinon/sinon': {
      deps: [
        'sinon/sinon-timers-1.8.2'
      ],
      exports: 'sinon'
    }
  },
  // mark all requested files with instrument query param
  urlArgs: COVERAGE ? 'instrument=true' : void 0
});

function setupCoverage(done) {
  document.title = document.title.replace('Tests', 'Coverage');
  require([
    'testUtils/istanbul_reporter/reporter'
  ], function (IstanbulReporter) {
    mocha.reporter(IstanbulReporter);
    done();
  });
}

function runTests() {
  require(["../../test/unit/specs/apps/dashboard/index","../../test/unit/specs/calculate_indices","../../test/unit/specs/courier","../../test/unit/specs/data_source","../../test/unit/specs/mapper"], function () {
    window.mochaRunner = mocha.run().on('end', function () {
      window.mochaResults = this.stats;
    });
  });
}

if (COVERAGE) {
  setupCoverage(runTests);
} else {
  runTests();
}</script></body></html>