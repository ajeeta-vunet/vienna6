
<div class="editor-row">
  <div class="section">
    <div class="editor-option">
      <label class="small">Persistent id field <tip>choose a field that does not change on node restart</tip></label>
      <input type="text" bs-typeahead="fields.list" class="input-large" ng-model="panel.node_persistent_field"/>
    </div>
    <div class="editor-option" ng-show="panel.mode != 'count'">
      <label class="small">Display field <tip>will be used as the name of each row</tip></label>
      <input type="text" bs-typeahead="fields.list" class="input-large" ng-model="panel.node_display_field"/>
    </div>
  </div>
</div>

<div class="row-fluid">
  <div class="span12">
    <table class="table table-condensed table-striped">
      <thead>
      <th>Metrics</th>
      <th>Field</th>
      <th>Warning</th>
      <th>Error</th>
      <th>Prec.</th>
      <th/>
      <th/>
      </thead>
      <tr ng-repeat="metric in panel.metrics">
        <td>
          <span ng-show="metricEditor.index != $index">{{metric.name}}</span>
          <input ng-show="metricEditor.index == $index" type="text" class="input-medium" ng-model="metric.name" ng-required/></td>
        </td>
        <td>
          <span ng-show="metricEditor.index != $index">{{metric.field}}</span>
          <input ng-show="metricEditor.index == $index"  placeholder="field name"
                 type="text" bs-typeahead="fields.list" class="input-medium" ng-model="metric.field" ng-required/></td>
        </td>
        <td>
          <span ng-show="metricEditor.index != $index">{{formatAlert(metric.warning)}}</span>
          <input ng-show="metricEditor.index == $index" type="text" class="input-mini" alert-value ng-model="metric.warning" ng-required/></td>
        </td>
        <td>
          <span ng-show="metricEditor.index != $index">{{formatAlert(metric.error)}}</span>
          <input ng-show="metricEditor.index == $index" type="text" class="input-mini" alert-value ng-model="metric.error" ng-required/></td>
        </td>
        <td>
          <span ng-show="metricEditor.index != $index">{{metric.decimals}}</span>
          <input ng-show="metricEditor.index == $index" type="number" class="input-mini" ng-model="metric.decimals" ng-required/></td>
        </td>


        <td ng-show="metricEditor.index != $index">
          <i ng-show="metricEditor.index < 0" ng-click="metricEditor.index=$index" class="pointer icon-edit"></i></td>
        <td ng-show="metricEditor.index != $index">
          <i ng-show="metricEditor.index < 0 && !$first" ng-click="_.move(panel.metrics,$index,$index-1)" class="pointer icon-arrow-up"></i>
        </td>
        <td ng-show="metricEditor.index != $index">
          <i ng-show="metricEditor.index < 0 && !$last" ng-click="_.move(panel.metrics,$index,$index+1)" class="pointer icon-arrow-down"></i>
        </td>

        <td ng-show="metricEditor.index == $index">
          <i class="pointer icon-check" ng-click="metricEditor.index=-1"></i>
        </td>
        <td ng-show="metricEditor.index == $index">
          <i ng-click="deleteMetric($index)" class="pointer icon-remove"></i>
        <td ng-show="metricEditor.index == $index">
          <i class="icon"></i></td>
      </tr>
    </table>
    <form class="form-inline">
      <select ng-model="metricEditor.add">
        <option ng-repeat="metric in addMetricOptions()"
          value="{{metric.field}}">
          {{metric.name}}
        </option>
      </select>
      <button class="btn btn-success" ng-click="addMetric(metricEditor.add);metricEditor.add=undefined" ng-disabled="metricEditor.add === undefined">
        Add Metric</button>
    </form>
  </div>
</div>